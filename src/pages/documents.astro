---
import Footer from '../components/Footer.astro';
import documentsData from '../data/documents_2.json';

const documents = documentsData.results;
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Documents - BioSeekers NASA</title>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;500;600;700;800;900&family=Source+Sans+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="/styles/tailwind.css">
		<link rel="stylesheet" href="/styles/typography.css">
		<link rel="stylesheet" href="/styles/animations.css">
		<link rel="stylesheet" href="/styles/space-effects.css">
	</head>
	<body class="space-container text-white overflow-x-hidden min-h-screen overflow-y-auto">
		<!-- Mobile Hamburger Menu -->
		<div class="lg:hidden bg-[#1a1a2e] border-b border-[#333] py-2 px-4 flex justify-end">
			<button id="mobileMenuToggle" class="text-white p-1 bg-[#333] rounded hover:bg-[#444] transition-colors">
				<svg width="20" height="20" viewBox="0 0 24 24" fill="none">
					<path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
				</svg>
			</button>
		</div>
		
		<div class="flex min-h-screen">
			<!-- Left Sidebar -->
			<div id="sidebar" class="w-64 bg-[#1a1a2e] border-r border-[#333] flex flex-col hidden lg:flex fixed lg:relative top-0 left-0 h-screen lg:h-auto lg:min-h-screen z-50">
				<!-- Logo -->
				<div class="p-6 border-b border-[#333] flex items-center justify-between">
					<img src="/images/logo_landing.png" alt="BioSeekers Logo" class="h-6 w-auto" />
					<button id="closeSidebar" class="lg:hidden text-white">
						<svg width="24" height="24" viewBox="0 0 24 24" fill="none">
							<path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					</button>
				</div>
				<!-- Navigation Menu -->
				<nav class="flex-1 p-4 space-y-2">
					<div class="space-y-1">
						<a href="/search" class="flex items-center gap-3 text-white hover:text-[#FFE500] cursor-pointer">
							<svg width="18" height="18" viewBox="0 0 24 24" fill="none">
								<path d="M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
							<span>Search</span>
						</a>
						<div class="flex items-center gap-3 text-[#FFE500] cursor-pointer border-l-2 border-[#FFE500] pl-3">
							<svg width="18" height="18" viewBox="0 0 24 24" fill="none" class="text-[#FFE500]">
								<path d="M14 2H6C4.895 2 4 2.895 4 4V20C4 21.105 4.895 22 6 22H18C19.105 22 20 21.105 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								<path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								<path d="M16 13H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								<path d="M16 17H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								<path d="M10 9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
							<span>Documents</span>
						</div>
						<a href="/dashboard" class="flex items-center gap-3 text-white hover:text-[#FFE500] cursor-pointer">
							<svg width="18" height="18" viewBox="0 0 24 24" fill="none">
								<path d="M3 3H21V21H3V3ZM5 5V19H19V5H5ZM7 7H17V9H7V7ZM7 11H17V13H7V11ZM7 15H17V17H7V15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
							<span>Dashboard</span>
						</a>
						<a href="/qa" class="flex items-center gap-3 text-white hover:text-[#FFE500] cursor-pointer">
							<svg width="18" height="18" viewBox="0 0 24 24" fill="none">
								<circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
								<path d="M9.09 9C9.325 8.331 9.789 7.812 10.4 7.4C11.011 6.988 11.73 6.8 12.5 6.8C13.27 6.8 13.989 6.988 14.6 7.4C15.211 7.812 15.675 8.331 15.91 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								<path d="M12 17H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
							<span>Q & A</span>
						</a>
					</div>
				</nav>
				<!-- User Profile -->
				<div class="p-4 border-t border-[#333]">
					<div class="flex items-center gap-3">
						<div class="w-8 h-8 bg-gradient-to-br from-[#FFE500] to-[#FFA500] rounded-full flex items-center justify-center">
							<span class="text-black font-bold text-sm">U</span>
						</div>
						<div>
							<div class="text-white text-sm font-medium">User Profile</div>
							<div class="text-gray-400 text-xs">Scientist</div>
						</div>
					</div>
				</div>
			</div>
			
			<!-- Main Content -->
			<div class="flex-1 bg-[#0a0a1a] relative">
				<!-- Background Elements -->
				<div class="absolute inset-0 bg-stars animate-twinkle opacity-30"></div>
				<div class="absolute bottom-0 left-0 w-full h-[40%] bg-grid-pattern animate-grid-move opacity-20"></div>
				<!-- Content -->
				<div class="relative z-10 p-4 sm:p-6 lg:p-8">
					<!-- Header -->
					<div class="mb-6 lg:mb-8">
						<h1 class="space-title text-[#FFE500] mb-4 text-xl lg:text-2xl">Research Documents</h1>
						<p class="space-body text-gray-300 text-sm lg:text-base">Explore NASA's bioscience research papers and technical reports</p>
					</div>
					
					<!-- View Toggle -->
					<div class="mb-6 flex gap-4">
						<button id="gridViewBtn" class="px-4 py-2 bg-[#FFE500] text-black rounded-lg font-medium transition-colors">
							Grid View
						</button>
						<button id="graphViewBtn" class="px-4 py-2 bg-[#333] text-white rounded-lg font-medium hover:bg-[#444] transition-colors">
							Graph View
						</button>
					</div>
					
					<!-- Documents Grid -->
					<div id="documentsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
						{documents.map((doc) => (
							<div class="bg-[#1a1a2e] border border-[#333] rounded-lg p-6 hover:border-[#FFE500] transition-all duration-300 hover:scale-105">
								<!-- Document Header -->
								<div class="flex justify-between items-start mb-4">
									<div class="flex-1">
										<h3 class="text-lg font-semibold text-white mb-2 line-clamp-2">{doc.title}</h3>
										<p class="text-sm text-gray-400 mb-2">Score: {(doc.score * 100).toFixed(1)}%</p>
									</div>
									<div class="ml-4 flex-shrink-0">
										<span class="text-xs bg-[#FFE500]/20 text-[#FFE500] px-2 py-1 rounded">
											{doc.chunk_type}
										</span>
									</div>
								</div>
								
								<!-- Document Content -->
								<p class="text-gray-300 text-sm mb-4 line-clamp-3">{doc.chunk_content.substring(0, 200)}...</p>
								
								<!-- Document Meta -->
								<div class="flex flex-wrap gap-2 mb-4">
									<span class="text-xs bg-[#333] text-gray-300 px-2 py-1 rounded">Research</span>
									<span class="text-xs bg-[#FFE500]/10 text-[#FFE500] px-2 py-1 rounded">
										{Math.round(doc.score * 100)}% match
									</span>
								</div>
								
								<!-- Document Stats -->
								<div class="flex justify-between items-center text-xs text-gray-500 mb-4">
									<span>Chunk ID: {doc.chunk_uuid.substring(0, 8)}...</span>
									<span>Type: {doc.chunk_type}</span>
								</div>
								
								<!-- Action Buttons -->
								<div class="flex gap-2">
									<button class="flex-1 space-button py-2 text-sm">
										View Document
									</button>
									<a href="/data/genome.pdf" download="NASA_Genome_Research.pdf" class="flex-1 bg-[#00d4ff] text-black py-2 px-3 rounded-lg font-medium hover:bg-[#00b8e6] transition-colors text-center text-sm">
										Download PDF
									</a>
								</div>
							</div>
						))}
					</div>
					
					<!-- Graph Visualization -->
					<div id="documentsGraph" class="hidden">
						<div class="bg-[#1a1a2e] border border-[#333] rounded-lg p-6">
							<div class="mb-4">
								<h3 class="text-lg font-semibold text-white mb-2">Document Relationships</h3>
								<p class="text-sm text-gray-400">Nodes represent documents, connections show shared keywords and topics</p>
							</div>
							<div id="graphContainer" class="w-full h-96 border border-[#333] rounded bg-[#0a0a1a] relative overflow-hidden">
								<svg id="graphSvg" class="w-full h-full"></svg>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Footer -->
		<Footer />
		
		<script src="/js/documents.js" is:inline></script>
	</body>
</html>
